{"is_source_file": true, "format": "Python", "description": "This file defines a FastAPI web server for a weather backend API. It includes route handlers for health checks and weather data retrieval, models for request and response schemas, and internal functions to fetch and normalize data from the OpenWeatherMap API.", "external_files": ["fastapi", "httpx", "pydantic", "os"], "external_methods": ["httpx.AsyncClient", "httpx.RequestError", "fastapi.FastAPI", "fastapi.Body", "fastapi.HTTPException", "fastapi.Query", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field"], "published": ["health_check", "get_weather", "post_weather"], "classes": [{"name": "WeatherResponse", "description": "Normalized weather response consumed by the frontend."}, {"name": "WeatherRequest", "description": "Request body model for weather query."}], "methods": [{"name": "WeatherResponse _normalize_openweather_payload(payload: Dict[str, Any])", "description": "Converts OpenWeatherMap API response to the normalized WeatherResponse schema.", "scope": "", "scopeKind": ""}, {"name": "WeatherResponse _fetch_current_weather(city: str, api_key: str)", "description": "Fetches current weather data asynchronously from OpenWeatherMap for a given city.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] health_check()", "description": "Provides a simple health check endpoint.", "scope": "", "scopeKind": ""}, {"name": "WeatherResponse get_weather(city: str = Query(..., min_length=1, description=\"City name (e.g., 'London').\"))", "description": "Endpoint to get weather data using query parameter.", "scope": "", "scopeKind": ""}, {"name": "WeatherResponse post_weather(payload: WeatherRequest = Body(...))", "description": "Endpoint to get weather data using JSON request body.", "scope": "", "scopeKind": ""}], "calls": ["httpx.AsyncClient.get", "_normalize_openweather_payload", "_fetch_current_weather", "os.getenv", "raise HTTPException"], "search-terms": ["FastAPI weather API", "OpenWeatherMap proxy", "WeatherResponse model", "WeatherRequest model", "/weather endpoint", "CORS middleware", "API key environment variable"], "state": 2, "file_id": 1, "knowledge_revision": 10, "git_revision": "66ea8fb18d7606d187d4444cd7c6d4a5be282175", "revision_history": [{"8": "66ea8fb18d7606d187d4444cd7c6d4a5be282175"}, {"10": "66ea8fb18d7606d187d4444cd7c6d4a5be282175"}], "ctags": [{"_type": "tag", "name": "OPENWEATHER_CURRENT_URL", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^OPENWEATHER_CURRENT_URL = \"https:\\/\\/api.openweathermap.org\\/data\\/2.5\\/weather\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "WeatherRequest", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^class WeatherRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WeatherResponse", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^class WeatherResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_fetch_current_weather", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^async def _fetch_current_weather(city: str, api_key: str) -> WeatherResponse:$/", "language": "Python", "typeref": "typename:WeatherResponse", "kind": "function", "signature": "(city: str, api_key: str)"}, {"_type": "tag", "name": "_normalize_openweather_payload", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^def _normalize_openweather_payload(payload: Dict[str, Any]) -> WeatherResponse:$/", "language": "Python", "typeref": "typename:WeatherResponse", "kind": "function", "signature": "(payload: Dict[str, Any])"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^    city: str = Field(..., description=\"City name used for the query (as returned by OpenWeather/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "WeatherResponse", "scopeKind": "class"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^    city: str = Field(..., min_length=1, description=\"City name to lookup (e.g., 'London').\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "WeatherRequest", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^    description: str = Field(..., description=\"Short weather description (e.g., 'clear sky').\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "WeatherResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_weather", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^async def get_weather(city: str = Query(..., min_length=1, description=\"City name (e.g., 'London/", "language": "Python", "typeref": "typename:WeatherResponse", "kind": "function", "signature": "(city: str = Query(..., min_length=1, description=\"City name (e.g., 'London').\"))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^def health_check() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "humidity", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^    humidity: int = Field(..., description=\"Current humidity percentage.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "WeatherResponse", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "post_weather", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^async def post_weather(payload: WeatherRequest = Body(...)) -> WeatherResponse:$/", "language": "Python", "typeref": "typename:WeatherResponse", "kind": "function", "signature": "(payload: WeatherRequest = Body(...))"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/weather-search-app-6692-6704/weather_backend/src/api/main.py", "pattern": "/^    temperature: float = Field(..., description=\"Current temperature in Celsius.\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "WeatherResponse", "scopeKind": "class"}], "hash": "74d8f20e002934136a1de58a4d80e202", "format-version": 4, "code-base-name": "weather_backend", "filename": "weather_backend/src/api/main.py", "fields": [{"name": "OPENWEATHER_CURRENT_URL = \"https:\\/\\/api.openweathermap.org\\/data\\/2.5\\/weather\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str city", "scope": "WeatherResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str description", "scope": "WeatherResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int humidity", "scope": "WeatherResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "float temperature", "scope": "WeatherResponse", "scopeKind": "class", "description": "unavailable"}]}